\input{paper.cond}
\inputcond{preamble}
\begin{document}
\inputcond{frontmatter}
\chapter{Introduction}

a complicated running example that we can simplify to show bits and pieces
of unsatisfactory solutions, etc. (actually, perhaps a simple example that
we can complexify might also be a reasonable approach. let's try that)

A bowling league keeps statistics about its members. They keep a lot of
details, but want to put a splash on their wiki congratulating players who
achieved a very high score that week.  For simplicity, let's say ``a lot of
details'' means just two details, one of which they want to appear on the
website and one not. For example:

\begin{tabular}{lll}
    Name & Top Score This Week & Mean Score All Time \\
    \hline
    Alexis  & 278 & 258 \\
    Billie  & 275 & 260 \\
    Casy    & 262 & 254 \\
    Dana    & 262 & 255 \\
    Eddie   & 251 & 255 \\
    Frankie & 231 & 249
\end{tabular}

On their website, they show players with scores over 275:

\begin{tabular}{ll}
    Alexis & 278 \\
    Billie & 275
\end{tabular}

The next week, everybody scores identically (so I don't have to exhaust my
internal random number generator!), except Casey has an exceptionally good
week:

\begin{tabular}{lll}
    Name & Top Score This Week & Mean Score All Time \\
    \hline
    Alexis  & 278 & 258 \\
    Billie  & 275 & 260 \\
    Casy    & 283 & 254 \\
    Dana    & 262 & 255 \\
    Eddie   & 251 & 255 \\
    Frankie & 231 & 249
\end{tabular}

The wiki updates correspondingly:

\begin{tabular}{lll}
    Alexis & 278 \\
    Billie & 275 \\
    Casy   & 283
\end{tabular}

This gives Casey a chance to notice that his name is spelled incorrectly. He
updates the wiki, and, we might hope, the league's records update
accordingly.

Ways this example can be extended to show off particular problems:
\begin{enumerate}
    \item This example isn't yet, but could become, a good example for the
        alignment problem: perhaps the ordering could change to maintain the
        ``sorted-by-top-score'' invariant so that positional alignment isn't
        a good solution, and the name-change means that key-based alignment
        isn't a good solution.

    \item Suppose the wiki linked from members' names to a personal wiki
        page (with a bio or some such thing). In this scenario, each
        repository has data that the other doesn't, which could be a good
        motivation for symmetric lenses.

    \item As the connection between the wiki and the league records grows
        features like the previous one, the motivation for composition gets
        more and more clear: you want to specify the transformation in
        chunks (clear out the mean score data, add personal links, only keep
        people with a certain minimum score) that combine together to do
        what you want.

    \item Some discussion of how the league records are stored and how the
        wiki is stored could lead into the disconnect between algebraic
        structures and instantiations that I've been struggling with for the
        past few years.
\end{enumerate}

\chapter{Background: Asymmetric Lenses}

and related work, e.g. view-update problem and friends (?)

\chapter{Challenges}

information loss

composition

alignment

concrete instantiations

\chapter{Symmetric Lenses}

information loss + composition

\chapter{Edit Lenses}

alignment

\chapter{Spreadsheets}

instantiating symmetric lenses

\chapter{Tree Lenses}

instantiating edit lenses

\chapter{Conclusion}

% TODO: uncomment and fill in
%\begin{thebibliography}{99}
%
%% An alphabetical listing of all references must be used.
%\end{thebibliography}

\end{document}
