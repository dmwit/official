% Here is a sample format for dissertation in math.  You need to check
% University of Pennsylvania Doctoral Dissertation Manual to adjust
% any changes they made at the webpage:

% http://www.upenn.edu/grad/DissManual.html.

% This style file was used in connection with printing from printer 3one.
% (Different printers could give you different margins.)

% This sample can also be used for masters thesis, but you need to make
% some slight changes.

\documentclass[12pt]{report}
\usepackage{paper}
\usepackage[numbers,sort&compress]{natbib}

\setlength{\headheight}{0in}
\setlength{\textheight}{8.5in}
\setlength{\oddsidemargin}{0.55in}
\setlength{\textwidth}{5.87in}
\setlength{\headsep}{-.19in}

\pagestyle{plain}
\newcommand{\doublespaced}{\renewcommand{\baselinestretch}{2}\normalfont}
\newcommand{\singlespaced}{\renewcommand{\baselinestretch}{1}\normalfont}
\newcommand{\draftspaced}{\ifdraft\singlespaced\else\doublespaced\fi}

\numberwithin{equation}{section}

\doublespaced
\def\thetitle{Lenses LOL}
\def\theauthor{Daniel Wagner}
\def\theadvisor{Benjamin C. Pierce, Advisor}
\def\THEAUTHOR{Daniel Wagner}
\def\THEADVISOR{Benjamin C. Pierce}
\def\theyear{2014}
\begin{document}
\pagenumbering{roman}
\doublespaced
\large\newlength{\oldparskip}\setlength\oldparskip{\parskip}\parskip=.3in
\thispagestyle{empty}
\begin{center}
\vspace*{\fill}
\thetitle

\theauthor


A Dissertation

in

Computer and Information Sciences
\end{center}


\noindent\singlespaced\large
Presented to the Faculties of the University of Pennsylvania in Partial
Fulfillment of the Requirements for the Degree of Doctor of Philosophy


\doublespaced\large
\begin{center}
\theyear
\end{center}


\noindent\makebox[0in][l]{\rule[2ex]{3in}{.3mm}}
\singlespaced
Benjamin C. Pierce\\
Supervisor of Dissertation


\noindent\makebox[0in][l]{\rule[2ex]{3in}{.3mm}}
\singlespaced
Val Tannen\\
Graduate Group Chairperson
\vspace*{\fill}

\normalsize\parskip=\oldparskip


\newpage
\doublespaced

\chapter*{Acknowledgments}

\newpage
\begin{center}
  ABSTRACT\\
\thetitle\\
\vspace{.5in}
  \theauthor\\
  \theadvisor
\end{center}

\doublespaced
\noindent

% TODO: Put the content of the abstract here

\vspace*{\fill}

\newpage

\tableofcontents

\newpage
\draftspaced
\pagenumbering{arabic}

\chapter{Introduction}
\label{chap:introduction}

a complicated running example that we can simplify to show bits and pieces
of unsatisfactory solutions, etc. (actually, perhaps a simple example that
we can complexify might also be a reasonable approach. let's try that)

A bowling league keeps statistics about its members. They keep a lot of
details, but want to put a splash on their wiki congratulating players who
achieved a very high score that week.  For simplicity, let's say ``a lot of
details'' means just two details, one of which they want to appear on the
website and one not. For example:

\begin{tabular}{lll}
    Name & Top Score This Week & Mean Score All Time \\
    \hline
    Alexis  & 278 & 258 \\
    Billie  & 275 & 260 \\
    Casy    & 262 & 254 \\
    Dana    & 262 & 255 \\
    Eddie   & 251 & 255 \\
    Frankie & 231 & 249
\end{tabular}

On their website, they show players with scores over 275:

\begin{tabular}{ll}
    Alexis & 278 \\
    Billie & 275
\end{tabular}

The next week, everybody scores identically (so I don't have to exhaust my
internal random number generator!), except Casey has an exceptionally good
week:

\begin{tabular}{lll}
    Name & Top Score This Week & Mean Score All Time \\
    \hline
    Alexis  & 278 & 258 \\
    Billie  & 275 & 260 \\
    Casy    & 283 & 254 \\
    Dana    & 262 & 255 \\
    Eddie   & 251 & 255 \\
    Frankie & 231 & 249
\end{tabular}

The wiki updates correspondingly:

\begin{tabular}{lll}
    Alexis & 278 \\
    Billie & 275 \\
    Casy   & 283
\end{tabular}

This gives Casey a chance to notice that his name is spelled incorrectly. He
updates the wiki, and, we might hope, the league's records update
accordingly.

Ways this example can be extended to show off particular problems:
\begin{enumerate}
    \item This example isn't yet, but could become, a good example for the
        alignment problem: perhaps the ordering could change to maintain the
        ``sorted-by-top-score'' invariant so that positional alignment isn't
        a good solution, and the name-change means that key-based alignment
        isn't a good solution.

    \item Suppose the wiki linked from members' names to a personal wiki
        page (with a bio or some such thing). In this scenario, each
        repository has data that the other doesn't, which could be a good
        motivation for symmetric lenses.

    \item As the connection between the wiki and the league records grows
        features like the previous one, the motivation for composition gets
        more and more clear: you want to specify the transformation in
        chunks (clear out the mean score data, add personal links, only keep
        people with a certain minimum score) that combine together to do
        what you want.

    \item Some discussion of how the league records are stored and how the
        wiki is stored could lead into the disconnect between algebraic
        structures and instantiations that I've been struggling with for the
        past few years.
\end{enumerate}

\chapter{Background: Asymmetric Lenses}
\label{chap:background}

and related work, e.g. view-update problem and friends (?)

\chapter{Challenges}
\label{chap:challenges}

information loss

composition

alignment

concrete instantiations

\chapter{Symmetric Lenses}
\label{chap:complement}

\input{complement}

\chapter{Edit Lenses}
\label{chap:delta}

\mlinjargs\input{delta}\mlinjnoargs

\chapter{Spreadsheets}
\label{chap:hyper}

\section{Finished Work}
\input{hyper_finished_work}

\section{Spreadsheets}
\input{hyper_spreadsheets}

\chapter{Tree Lenses}
\label{chap:tree}

\input{tree}

\chapter{Related Work}

or possibly do this in the Background chapter instead

\chapter{Conclusion}
\label{chap:conclusion}

\section{Future Work}
\label{sec:future}

say something about wiring diagrams

% TODO: there's probably a required style
% TODO: references must be in alphabetical order, so double-check that
\bibliographystyle{plainnat}
\bibliography{bcp,harmony,complement,delta,tree}

\end{document}
